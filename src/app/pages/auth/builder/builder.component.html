<nz-layout class="builder-layout">
  <nz-sider nzWidth="320px" class="builder-screens">
    <nz-card nzTitle="Screens" [nzExtra]="screensExtra">
      <nz-list *ngIf="dataService && dataService.currentTenantData && dataService.currentTenantData.screens">
        <nz-list-item *ngFor="let screen of dataService.currentTenantData.screens; index as i;">
          <ng-container>
            <nz-list-item-meta [nzDescription]="'Passo ' + (i + 1)">
              <nz-list-item-meta-title>{{ screen.title }}</nz-list-item-meta-title>
            </nz-list-item-meta>
            <ul nz-list-item-actions>
              <nz-list-item-action>
                <button nz-button nzType="link" nzSize="small"><span nz-icon nzType="edit"></span></button>
              </nz-list-item-action>
              <nz-list-item-action>
                <button nz-button nzType="link" nzSize="small"><span nz-icon nzType="delete"></span></button>
              </nz-list-item-action>
            </ul>
          </ng-container>
        </nz-list-item>
      </nz-list>
    </nz-card>
    <ng-template #screensExtra>
      <button nz-button nzType="link" nzSize="small" nzShape="round">
        <span nz-icon nzType="plus"></span>
        Add screen
      </button>
    </ng-template>
  </nz-sider>
  <nz-content class="builder-screens-content">
    <nz-layout class="builder-screens-content-layout">
      <nz-content class="builder-fields">
        <nz-card nzTitle="Editing: {{ currentScreen?.title }}" style="width: 100%;" [nzExtra]="editExtra">
          <section class="fields-wrapper">
            <div>

              <nz-space nzDirection="vertical" nzSize="middle" class="components-spacer">
                <nz-input-group *nzSpaceItem [nzSuffix]="suffixIcon">
                  <input type="text" nz-input placeholder="Search a component" [(ngModel)]="searchComponentValue" />
                </nz-input-group>
                <ng-template #suffixIcon>
                  <span nz-icon nzType="search"></span>
                </ng-template>
                <nz-tree *nzSpaceItem nzBlockNode [nzData]="componentNodes" [nzTreeTemplate]="componentNodeTemplate"></nz-tree>
                <ng-template #componentNodeTemplate let-node let-origin="origin">
                  <span class="component-node">
                    <nz-space nzSize="small">
                      <span *nzSpaceItem nz-icon [nzType]="node.icon"></span>
                      <span *nzSpaceItem nz-typography class="node-title">{{ node.title }}</span>
                      <ng-container *ngIf="origin.mainValue">
                        <p *nzSpaceItem nz-typography nzType="secondary" class="main-value">{{ origin.mainValue }}</p>
                      </ng-container>
                    </nz-space>
                    <nz-space nzSize="small" class="component-node-operations">
                      <ng-container *ngIf="origin.canHaveChildren">
                        <button *nzSpaceItem nz-button nzType="link" nzSize="small" nz-tooltip nzTooltipTitle="Add children">
                          <span nz-icon nzType="plus-square"></span>
                        </button>
                      </ng-container>
                      <button *nzSpaceItem nz-button nzType="link" nzSize="small" nzDanger nz-tooltip nzTooltipTitle="Delete component">
                        <span nz-icon nzType="delete"></span>
                      </button>
                    </nz-space>
                  </span>
                </ng-template>
              </nz-space>


            </div>
            <div class="properties-divider">
              <div class="properties-description">
                <span nz-icon nzType="double-right" nzTheme="outline"></span>
              </div>
            </div>
            <div>
              <h5 nz-typography>Component Properties</h5>
            </div>
          </section>
        </nz-card>
        <ng-template #editExtra>
          <nz-space nzSize="small">
            <button *nzSpaceItem nz-button nzType="default" nzSize="small" nzShape="round">
              Cancel
            </button>
            <button *nzSpaceItem nz-button nzType="primary" nzSize="small" nzShape="round">
              <span nz-icon nzType="save"></span>
              Save
            </button>
          </nz-space>
        </ng-template>
      </nz-content>
      <nz-sider nzWidth="400px" class="builder-smartphone">
        <div class="smartphone-frame">
          <i class="speaker"></i>
          <b class="camera"></b>
          <div class="current-screen-content">
          </div>
        </div>
        <span nz-typography nzType="secondary" class="preview-description">Preview: {{ currentScreen?.title }}</span>
      </nz-sider>
    </nz-layout>
  </nz-content>
</nz-layout>
